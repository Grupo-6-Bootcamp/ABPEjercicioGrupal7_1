{% extends 'base.html' %}
{%load static %}

{% block body %}
<!--Wishlist for user template-->
 <h1>Wishlist</h1>
  
  <h2>Products:</h2>
  <ul>
    {% for producto in productos %}
      <li>{{ producto.idproducto.nombre }} - Quantity: {{ producto.cantidad_deseada }}</li>
    {% empty %}
      <li>No products in the wishlist.</li>
    {% endfor %}
  </ul>
  
  <h2>Add Product:</h2>
  <form method="post" action="{% url 'wishlist' %}">
    {% csrf_token %}
    <label for="producto">Product:</label>
    <select name="producto" id="producto">
      {% for product in available_products %}
        <option value="{{ product.id }}">{{ product.name }}</option>
      {% endfor %}
    </select>
    <br>
    <label for="cantidad">Quantity:</label>
    <input type="number" name="cantidad" id="cantidad">
    <br>
    <button type="submit">Add to Wishlist</button>
  </form>
  
  <h2>Update Quantity:</h2>
  {% for producto in productos %}
    <form method="post" action="{% url 'wishlist' %}">
      {% csrf_token %}
      <input type="hidden" name="producto" value="{{ producto.id }}">
      <label for="cantidad-{{ producto.id }}">Quantity:</label>
      <input type="number" name="cantidad" id="cantidad-{{ producto.id }}" value="{{ producto.cantidad_deseada }}">
      <button type="submit">Update Quantity</button>
    </form>
  {% endfor %}
  
  <h2>Delete Product:</h2>
  {% for producto in productos %}
    <form method="post" action="{% url 'wishlist' %}">
      {% csrf_token %}
      <input type="hidden" name="producto" value="{{ producto.id }}">
      <button type="submit">Delete</button>
    </form>
  {% endfor %} 

  {% comment %} <div class="row align-items-center">
    <div class="col-10 d-flex justify-content-left py-3">
        <h3>Gestión de Productos</h3>
    </div>
    <div class="col-2">
      <a href="{% url 'nuevo_producto' %}" class="btn botoncito btn-outline-personal" role="button">Agregar Producto</a>
    </div>
  </div>

  <div class="row">
    <div class="d-flex justify-content-left">
        <div class="card w-100">
            <div class="card-body">
                <div class="row fw-bold">
                  <div class="col-1">
                      Id
                  </div>
                  <div class="col-3">
                      Nombre
                  </div>
                  <div class="col-2">
                    Valor Unitario
                  </div>
                  <div class="col-4">
                    Descripción
                  </div>
                  <div class="col-2">
                    Stock
                </div>
              </div>
            </div>
        </div>
    </div>
  </div>

  {% for producto in productos %}
  <div class="row">
    <div class="d-flex justify-content-left">
        <div class="card w-100">
            <div class="card-body">
                <div class="row">
                  <div class="col-1">
                      {{ producto.id }}
                  </div>
                  <div class="col-3">
                      {{ producto.nombre }}
                  </div>
                  <div class="col-2">
                    {{ producto.valor_unit }}
                  </div>
                  <div class="col-4">
                    {{ producto.descripcion }}
                  </div>
                  <div class="col-2">
                    {{ producto.stock }}
                </div>
              </div>
            </div>
        </div>
    </div>
  </div>
  {% empty %}
  <div class="row">
    <div class="d-flex justify-content-center">
      <h4 class="pt-3"><span class="badge text-bg-danger">No hay productos diponibles para esta vista</span></h4>
    </div>
  </div>
  {% endfor %} {% endcomment %}
{% endblock body%}
